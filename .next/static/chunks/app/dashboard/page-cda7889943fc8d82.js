(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3712:function(e,t,r){Promise.resolve().then(r.bind(r,7736))},7977:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var s=r(4090);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),i=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},c=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:l="",children:u,iconNode:d,...m}=e;return(0,s.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:r,strokeWidth:i?24*Number(n)/Number(a):n,className:c("lucide",l),...m},[...d.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,s.forwardRef)((r,n)=>{let{className:o,...u}=r;return(0,s.createElement)(l,{ref:n,iconNode:t,className:c("lucide-".concat(a(i(e))),"lucide-".concat(e),o),...u})});return r.displayName=i(e),r}},8025:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(7977).Z)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},7326:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(7977).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},7907:function(e,t,r){"use strict";var s=r(5313);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},7736:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var s=r(3827),a=r(4090),n=r(7907),i=r(8714),c=r(575),o=r(8025),l=r(7326),u=r(9649);function d(){(0,u.e)({requireAuth:!0,fallback:"/"});let e=(0,n.useRouter)(),t=(0,i.createPagesBrowserClient)(),[r,d]=(0,a.useState)(""),[m,h]=(0,a.useState)(!1),[f,x]=(0,a.useState)([]),[g,p]=(0,a.useState)([]),[w,b]=(0,a.useState)(!0),[j,N]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{var r;b(!0);let{data:{session:s},error:a}=await t.auth.getSession();if(a||!s){e.push("/login");return}d(s.user.email||""),h((null===(r=s.user.user_metadata)||void 0===r?void 0:r.role)==="admin");let{data:n,error:i}=await t.from("user_courses").select("course_id, courses(id, title, description, image)").eq("user_id",s.user.id);i?N(i.message):x(n.map(e=>({id:e.course_id,...e.courses})));let{data:c,error:o}=await t.from("courses").select("*").order("created_at",{ascending:!1}).limit(4);!o&&c&&p(c),b(!1)})()},[e,t]);let v=t=>{let{title:r,items:a}=t;return(0,s.jsxs)("section",{className:"mb-12",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:r}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(t=>(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow hover:shadow-lg transition p-4 flex flex-col",children:[(0,s.jsx)("img",{src:t.image,alt:t.title,className:"w-full h-40 object-cover rounded-xl mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-bold mb-1",children:t.title}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-4 flex-1",children:t.description}),(0,s.jsxs)(c.z,{onClick:()=>e.push("/curso/".concat(t.id)),className:"mt-auto flex items-center gap-2",children:["Ir al curso ",(0,s.jsx)(o.Z,{className:"w-4 h-4"})]})]},t.id))})]})};return(0,s.jsx)("main",{className:"min-h-screen flex flex-col bg-gradient-to-b from-sky-50 to-white px-4 pt-4 pb-16",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto w-full",children:[(0,s.jsxs)("div",{className:"mb-10 flex flex-col md:flex-row justify-between items-start md:items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-3xl font-bold tracking-tight mb-1",children:["Hola, ",r]}),(0,s.jsx)("p",{className:"text-gray-600",children:"Bienvenido de nuevo. Acced\xe9 a tus cursos y segu\xed aprendiendo."})]}),(0,s.jsx)("div",{className:"flex gap-2 mt-4 md:mt-0 flex-wrap",children:m&&(0,s.jsxs)(c.z,{onClick:()=>e.push("/admin"),className:"flex gap-2",children:[(0,s.jsx)(l.Z,{className:"w-4 h-4"})," Panel de administraci\xf3n"]})})]}),w?(0,s.jsx)("p",{children:"Cargando datos..."}):j?(0,s.jsxs)("p",{className:"text-red-600",children:["Error: ",j]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v,{title:"Tus cursos",items:f}),(0,s.jsx)(v,{title:"Cursos populares",items:g})]})]})})}},575:function(e,t,r){"use strict";r.d(t,{z:function(){return a}});var s=r(3827);r(4090);let a=e=>{let{children:t,variant:r="default",className:a,...n}=e;return(0,s.jsx)("button",{className:"".concat("px-4 py-2 rounded font-medium transition"," ").concat({default:"bg-indigo-600 text-white hover:bg-indigo-700",outline:"border border-gray-300 text-gray-800 hover:bg-gray-100"}[r]," ").concat(a),...n,children:t})}},9649:function(e,t,r){"use strict";r.d(t,{e:function(){return i}});var s=r(4090),a=r(7907),n=r(8714);function i(e){let{requireAuth:t,redirectIfAuth:r,fallback:i}=e,c=(0,a.useRouter)(),o=(0,n.createBrowserSupabaseClient)();(0,s.useEffect)(()=>{o.auth.getSession().then(e=>{let{data:s}=e,a=!!s.session;t&&!a&&c.push(i),r&&a&&c.push(i)})},[t,r,i])}}},function(e){e.O(0,[51,714,971,69,744],function(){return e(e.s=3712)}),_N_E=e.O()}]);