(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[901],{1193:function(e,s,l){Promise.resolve().then(l.bind(l,7608))},7608:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return i}});var t=l(3827),a=l(4090),r=l(8714);function i(){let e=(0,r.createPagesBrowserClient)(),[s,l]=(0,a.useState)([]),[i,d]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{d(!0);let{data:s}=await e.from("courses").select("id, title, image"),{data:t}=await e.from("modules").select("id, course_id"),{data:a}=await e.from("user_progress").select("user_id, module_id, completed"),r=null!=t?t:[],i=null!=a?a:[],o={};for(let e of r)o[e.course_id]||(o[e.course_id]=[]),o[e.course_id].push(e.id);let n={},c={};for(let e of i){if(!e.completed)continue;let s=r.find(s=>s.id===e.module_id);if(!s)continue;n[s.course_id]=(n[s.course_id]||0)+1;let l=o[s.course_id]||[],t=i.filter(s=>s.user_id===e.user_id&&s.completed).map(e=>e.module_id),a=Array.from(new Set(t));l.length>0&&a.length===l.length&&(c[s.course_id]=c[s.course_id]||new Set,c[s.course_id].add(e.user_id))}let u=(null!=s?s:[]).map(e=>{var s,l;let t=(null===(s=o[e.id])||void 0===s?void 0:s.length)||0,a=n[e.id]||0,r=(null===(l=c[e.id])||void 0===l?void 0:l.size)||0;return{...e,total:t,completados:a,porcentaje:t>0?Math.round(a/t*100):0,finalizadores:r}});u.sort((e,s)=>s.porcentaje-e.porcentaje),l(u),d(!1)})()},[e]),(0,t.jsx)("main",{className:"min-h-screen px-6 py-10 bg-white",children:(0,t.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-sky-700 mb-8",children:"\uD83C\uDFC6 Ranking de cursos m\xe1s completados"}),i?(0,t.jsx)("p",{children:"Cargando ranking..."}):0===s.length?(0,t.jsx)("p",{children:"No hay cursos registrados a\xfan."}):(0,t.jsx)("ul",{className:"space-y-6",children:s.map((e,s)=>(0,t.jsxs)("li",{className:"bg-gray-50 p-6 rounded-lg shadow flex flex-col md:flex-row items-start gap-6",children:[(0,t.jsx)("img",{src:e.image,alt:e.title,className:"w-full md:w-32 h-32 object-cover rounded-lg flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold mb-1",children:[s+1,". ",e.title]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:[e.completados," m\xf3dulos completados en total"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[(0,t.jsx)("strong",{children:e.finalizadores})," persona",1!==e.finalizadores?"s":""," completaron todos los m\xf3dulos"]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-1",children:(0,t.jsx)("div",{className:"bg-emerald-500 h-3 rounded-full transition-all",style:{width:"".concat(e.porcentaje,"%")}})}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Promedio de finalizaci\xf3n: ",(0,t.jsxs)("strong",{children:[e.porcentaje,"%"]})]})]})]},e.id))})]})})}}},function(e){e.O(0,[51,714,971,69,744],function(){return e(e.s=1193)}),_N_E=e.O()}]);