(()=>{var e={};e.id=3,e.ids=[3],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},5692:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var t=r(482),a=r(9108),l=r(2563),i=r.n(l),n=r(8300),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(s,o);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5557)),"C:\\Users\\Carlos\\sl\xf1al\\src\\app\\admin\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1342)),"C:\\Users\\Carlos\\sl\xf1al\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,4117)),"C:\\Users\\Carlos\\sl\xf1al\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,8206)),"C:\\Users\\Carlos\\sl\xf1al\\src\\app\\not-found.tsx"]}],c=["C:\\Users\\Carlos\\sl\xf1al\\src\\app\\admin\\page.tsx"],u="/admin/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5221:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,6840,23)),Promise.resolve().then(r.t.bind(r,8771,23)),Promise.resolve().then(r.t.bind(r,3225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,3982,23))},5333:(e,s,r)=>{Promise.resolve().then(r.bind(r,4694))},6777:(e,s,r)=>{Promise.resolve().then(r.bind(r,6414))},8613:(e,s,r)=>{Promise.resolve().then(r.bind(r,1906))},1153:(e,s,r)=>{Promise.resolve().then(r.bind(r,3932))},3211:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});let t=(0,r(7075).Z)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},4694:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>x});var t=r(5344),a=r(3729),l=r(8428),i=r(7435),n=r(5094),o=r(7075);let d=(0,o.Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),c=(0,o.Z)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var u=r(3211),m=r(4669);function x(){let e=(0,l.useRouter)(),s=(0,i.createPagesBrowserClient)(),[r,o]=(0,a.useState)([]),[x,h]=(0,a.useState)({}),[p,g]=(0,a.useState)(null),[f,b]=(0,a.useState)(!0),[y,j]=(0,a.useState)({title:"",description:"",category:"",difficulty:"",price:""}),[v,N]=(0,a.useState)(null),[w,P]=(0,a.useState)({});(0,a.useEffect)(()=>{(async()=>{let{data:{session:r}}=await s.auth.getSession();if(!r||r.user.user_metadata?.role!=="admin"){e.push("/acceso-denegado");return}await C()})()},[e,s]);let C=async()=>{let{data:e,error:r}=await s.from("courses").select("*").order("created_at",{ascending:!1});r?m.ZP.error("Error cargando cursos: "+r.message):o(e||[]),b(!1)},k=async e=>{let{data:r,error:t}=await s.from("modules").select("*").eq("course_id",e).order("order_number");t?m.ZP.error("Error cargando m\xf3dulos: "+t.message):h(s=>({...s,[e]:r||[]}))},_=async()=>{if(!v)return m.ZP.error("Seleccion\xe1 una imagen de portada."),null;let e=`${Date.now()}_${v.name}`,r=m.ZP.loading("Subiendo imagen de portada..."),{error:t}=await s.storage.from("course-images").upload(e,v,{cacheControl:"3600",upsert:!1});if(t)return m.ZP.dismiss(r),m.ZP.error("Error subiendo imagen: "+t.message),null;let{data:a}=s.storage.from("course-images").getPublicUrl(e);return(m.ZP.dismiss(r),a?.publicUrl)?a.publicUrl:(m.ZP.error("No se pudo obtener la URL p\xfablica de la imagen."),null)},Z=async()=>{let{title:e,description:r,category:t,difficulty:a,price:l}=y;if(!e||!r||!t||!a||!l||!v){m.ZP.error("Completa todos los campos incluyendo la imagen de portada.");return}let i=await _();if(!i)return;let{error:n}=await s.from("courses").insert([{title:e,description:r,image:i,category:t,difficulty:a,price:Number(l)}]);n?m.ZP.error("Error al crear el curso: "+n.message):(m.ZP.success("Curso creado con \xe9xito"),j({title:"",description:"",category:"",difficulty:"",price:""}),N(null),await C())},q=async e=>{if(!confirm("\xbfSeguro que quer\xe9s eliminar este curso?"))return;let{error:r}=await s.from("courses").delete().eq("id",e);r?m.ZP.error("Error al eliminar curso: "+r.message):(m.ZP.success("Curso eliminado"),await C())},S=async e=>{p===e?g(null):(g(e),await k(e))},E=async e=>{let{title:r,content:t,order_number:a}=w[e]||{};if(!r||!t||!a){m.ZP.error("Todos los campos de m\xf3dulo son obligatorios.");return}let{error:l}=await s.from("modules").insert([{course_id:e,title:r,content:t,order_number:Number(a)}]);l?m.ZP.error("Error al crear m\xf3dulo: "+l.message):(m.ZP.success("M\xf3dulo creado"),P(s=>({...s,[e]:{}})),await k(e))},M=async(e,r)=>{if(!confirm("\xbfEliminar este m\xf3dulo?"))return;let{error:t}=await s.from("modules").delete().eq("id",e);t?m.ZP.error("Error al eliminar m\xf3dulo: "+t.message):(m.ZP.success("M\xf3dulo eliminado"),await k(r))};return t.jsx("main",{className:"min-h-screen bg-gray-50 px-6 py-10",children:(0,t.jsxs)("div",{className:"max-w-5xl mx-auto",children:[t.jsx("h1",{className:"text-3xl font-bold mb-8 text-sky-700",children:"Panel de administraci\xf3n"}),(0,t.jsxs)("section",{className:"bg-white p-6 rounded-xl shadow mb-12",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Crear nuevo curso"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t.jsx("input",{placeholder:"T\xedtulo",value:y.title,onChange:e=>j({...y,title:e.target.value}),className:"border p-2 rounded"}),t.jsx("input",{placeholder:"Categor\xeda",value:y.category,onChange:e=>j({...y,category:e.target.value}),className:"border p-2 rounded"}),t.jsx("input",{placeholder:"Dificultad",value:y.difficulty,onChange:e=>j({...y,difficulty:e.target.value}),className:"border p-2 rounded"}),t.jsx("input",{placeholder:"Precio",type:"number",value:y.price,onChange:e=>j({...y,price:e.target.value}),className:"border p-2 rounded"}),t.jsx("textarea",{placeholder:"Descripci\xf3n",value:y.description,onChange:e=>j({...y,description:e.target.value}),className:"border p-2 rounded md:col-span-2"}),t.jsx("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&N(e.target.files[0])},className:"border p-2 rounded md:col-span-2"})]}),(0,t.jsxs)(n.z,{onClick:Z,className:"flex items-center gap-2",children:[t.jsx(d,{className:"w-4 h-4"})," Crear curso"]})]}),(0,t.jsxs)("section",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Cursos existentes"}),f?t.jsx("p",{children:"Cargando cursos..."}):t.jsx("div",{className:"space-y-8",children:r.map(e=>(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-xl font-bold",children:e.title}),t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:e.description}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Categor\xeda: ",e.category," | Dificultad: ",e.difficulty," | Precio: $",e.price]})]}),t.jsx(n.z,{onClick:()=>q(e.id),variant:"outline",className:"p-1 text-sm text-red-600 border-red-600 hover:bg-red-50",children:t.jsx(c,{className:"w-4 h-4"})})]}),(0,t.jsxs)(n.z,{onClick:()=>S(e.id),variant:"outline",className:"mb-4",children:[t.jsx(u.Z,{className:"w-4 h-4 mr-1"}),p===e.id?"Ocultar m\xf3dulos":"Ver m\xf3dulos"]}),p===e.id&&(0,t.jsxs)("div",{className:"mt-4 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("h4",{className:"font-semibold",children:"Crear m\xf3dulo"}),t.jsx("input",{placeholder:"T\xedtulo del m\xf3dulo",className:"border p-2 w-full rounded",value:w[e.id]?.title||"",onChange:s=>P(r=>({...r,[e.id]:{...r[e.id],title:s.target.value}}))}),t.jsx("textarea",{placeholder:"Contenido (us\xe1 ![texto](url) para im\xe1genes)",className:"border p-2 w-full rounded",rows:6,value:w[e.id]?.content||"",onChange:s=>P(r=>({...r,[e.id]:{...r[e.id],content:s.target.value}}))}),t.jsx("input",{placeholder:"Orden del m\xf3dulo",type:"number",className:"border p-2 w-full rounded",value:w[e.id]?.order_number||"",onChange:s=>P(r=>({...r,[e.id]:{...r[e.id],order_number:s.target.value}}))}),t.jsx(n.z,{onClick:()=>E(e.id),children:"Guardar m\xf3dulo"})]}),(0,t.jsxs)("div",{className:"pt-4 border-t",children:[t.jsx("h4",{className:"font-semibold mb-2",children:"M\xf3dulos existentes"}),x[e.id]?.length===0?t.jsx("p",{className:"text-sm text-gray-500",children:"Este curso no tiene m\xf3dulos."}):t.jsx("ul",{className:"space-y-2",children:x[e.id]?.map(s=>t.jsxs("li",{className:"flex justify-between items-start border p-2 rounded",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"font-medium",children:[s.order_number,". ",s.title]}),t.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-line",children:s.content})]}),t.jsx(n.z,{onClick:()=>M(s.id,e.id),variant:"outline",className:"p-1 text-sm text-red-600 border-red-600 hover:bg-red-50",children:t.jsx(c,{className:"w-4 h-4"})})]},s.id))})]})]})]},e.id))})]})]})})}},6414:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>l});var t=r(5344),a=r(3729);function l({error:e,reset:s}){return(0,a.useEffect)(()=>{console.error("Error atrapado por error.tsx:",e)},[e]),(0,t.jsxs)("div",{className:"min-h-screen flex flex-col justify-center items-center bg-red-50 px-4 text-center",children:[t.jsx("h1",{className:"text-5xl font-bold text-red-600 mb-4",children:"\xa1Algo sali\xf3 mal!"}),t.jsx("p",{className:"text-gray-700 mb-6",children:"Ha ocurrido un error inesperado. Intent\xe1 recargar la p\xe1gina o volver m\xe1s tarde."}),t.jsx("button",{onClick:s,className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Reintentar"})]})}},1906:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>b});var t=r(5344),a=r(8428),l=r(6506),i=r(3729),n=r(7435),o=r(5094),d=r(5620),c=r(7603),u=r(573),m=r(3485),x=r(8120),h=r(2810);function p(){let e=(0,a.useRouter)(),s=(0,a.usePathname)(),r=(0,n.createBrowserSupabaseClient)(),[p,g]=(0,i.useState)(null);(0,i.useEffect)(()=>{r.auth.getSession().then(({data:e})=>{g(e.session)});let{data:e}=r.auth.onAuthStateChange((e,s)=>{g(s)});return()=>{e.subscription.unsubscribe()}},[r]);let f=async()=>{await r.auth.signOut(),e.push("/login")},b=p?.user.email==="tucorreo@ejemplo.com";return t.jsx("nav",{className:"bg-white shadow-sm px-6 py-4 sticky top-0 z-50",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[t.jsx("button",{onClick:()=>e.push(p?"/dashboard":"/"),className:"text-xl font-bold text-sky-700 hover:text-sky-900",children:"CursosOnline"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3 items-center",children:[(0,t.jsxs)(l.default,{href:"/explorar",className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-800",children:[t.jsx(d.Z,{className:"w-5 h-5"})," Explorar"]}),(0,t.jsxs)(l.default,{href:"/ranking",className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-800",children:[t.jsx(c.Z,{className:"w-5 h-5"})," Ranking"]}),p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.default,{href:"/perfil",className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-800",children:[t.jsx(u.Z,{className:"w-5 h-5"})," Perfil"]}),b&&(0,t.jsxs)(l.default,{href:"/admin",className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-800",children:[t.jsx(m.Z,{className:"w-5 h-5"})," Admin"]}),(0,t.jsxs)(o.z,{onClick:f,className:"inline-flex items-center gap-2 px-4 py-2 rounded-full text-sky-800 hover:bg-sky-100",children:[t.jsx(x.Z,{className:"w-5 h-5"})," Salir"]})]}):(s.startsWith("/explorar")||s.startsWith("/ranking"))&&(0,t.jsxs)(l.default,{href:"/login",className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-800",children:[t.jsx(h.Z,{className:"w-5 h-5"})," Ingresar"]})]})]})})}function g(){return(0,t.jsxs)("footer",{className:"bg-gray-900 text-white py-8 px-6 mt-16",children:[(0,t.jsxs)("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8 text-sm",children:[(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-base font-semibold mb-2",children:"Navegaci\xf3n"}),(0,t.jsxs)("ul",{className:"space-y-1",children:[t.jsx("li",{children:t.jsx(l.default,{href:"/",className:"hover:underline",children:"Inicio"})}),t.jsx("li",{children:t.jsx(l.default,{href:"/explorar",className:"hover:underline",children:"Explorar cursos"})}),t.jsx("li",{children:t.jsx(l.default,{href:"/ranking",className:"hover:underline",children:"Ranking"})}),t.jsx("li",{children:t.jsx(l.default,{href:"/perfil",className:"hover:underline",children:"Perfil"})})]})]}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-base font-semibold mb-2",children:"Contacto"}),t.jsx("p",{className:"text-gray-400",children:"Soporte: contacto@tusitio.com"})]}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-base font-semibold mb-2",children:"Seguinos"}),(0,t.jsxs)("ul",{className:"space-y-1",children:[t.jsx("li",{children:t.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"Instagram"})}),t.jsx("li",{children:t.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"Facebook"})})]})]})]}),(0,t.jsxs)("div",{className:"text-center text-xs text-gray-500 mt-6",children:["\xa9 ",new Date().getFullYear()," CursosOnline. Todos los derechos reservados."]})]})}r(3824);var f=r(4669);function b({children:e}){let s=["/login","/"].includes((0,a.usePathname)());return t.jsx("html",{lang:"es",children:(0,t.jsxs)("body",{className:"flex flex-col min-h-screen bg-white text-black",children:[!s&&t.jsx(p,{}),t.jsx("main",{className:"flex-1",children:e}),!s&&t.jsx(g,{}),t.jsx(f.x7,{position:"top-right"})]})})}},3932:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>l});var t=r(5344),a=r(6506);function l(){return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col justify-center items-center bg-gray-100 px-4 text-center",children:[t.jsx("h1",{className:"text-6xl font-bold text-indigo-600 mb-4",children:"404"}),t.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"P\xe1gina no encontrada"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"La p\xe1gina que est\xe1s buscando no existe o fue movida."}),t.jsx(a.default,{href:"/",children:t.jsx("button",{className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700",children:"Volver al inicio"})})]})}},5094:(e,s,r)=>{"use strict";r.d(s,{z:()=>a});var t=r(5344);r(3729);let a=({children:e,variant:s="default",className:r,...a})=>t.jsx("button",{className:`px-4 py-2 rounded font-medium transition ${{default:"bg-indigo-600 text-white hover:bg-indigo-700",outline:"border border-gray-300 text-gray-800 hover:bg-gray-100"}[s]} ${r}`,...a,children:e})},5557:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>l,__esModule:()=>a,default:()=>i});let t=(0,r(6843).createProxy)(String.raw`C:\Users\Carlos\slñal\src\app\admin\page.tsx`),{__esModule:a,$$typeof:l}=t,i=t.default},4117:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>l,__esModule:()=>a,default:()=>i});let t=(0,r(6843).createProxy)(String.raw`C:\Users\Carlos\slñal\src\app\error.tsx`),{__esModule:a,$$typeof:l}=t,i=t.default},1342:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>l,__esModule:()=>a,default:()=>i});let t=(0,r(6843).createProxy)(String.raw`C:\Users\Carlos\slñal\src\app\layout.tsx`),{__esModule:a,$$typeof:l}=t,i=t.default},8206:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>l,__esModule:()=>a,default:()=>i});let t=(0,r(6843).createProxy)(String.raw`C:\Users\Carlos\slñal\src\app\not-found.tsx`),{__esModule:a,$$typeof:l}=t,i=t.default},3824:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[638,328],()=>r(5692));module.exports=t})();